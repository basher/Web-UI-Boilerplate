import { Meta, Canvas } from '@storybook/blocks';
import * as WebUIFetchHtml from './WebUIFetchHtml.stories';

<Meta of={WebUIFetchHtml} />

# `<webui-fetch-html>`
- This is simply a demo to show the core features of a component that has some Ajax dependencies (e.g. fetching an HTML fragment).
- A more realistic example can be found in the [`<webui-predictive-search>`](/docs/web-components-or-custom-elements-webui-predictive-search--docs) Web Component.

<Canvas of={WebUIFetchHtml.WebUIFetchHtml} />

## Uses native Fetch API
- See [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) docs on MDN.
- Fetch aborts/timeouts are handled by an [AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) in `src/javascript/utils/ajax-helpers.ts`.

## Accessibility considerations
- An [ARIA live region](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions) is used to contain the Ajax response (or errors).
- The [Ajax loading spinner](/docs/components-ajax-spinner--docs) is an `<svg>` with an accessible `loading...` name, which will be announced in the live region.

## Required and optional HTML  or `data-` attributes

Attribute | Behaviour
--- | ---
`data-fetch-target` | Required. On the button that triggers the Fetch request. The value must match `data-fetch-container`.
`data-fetch-container` | Required. On the ARIA live region. The value must match `data-fetch-target`.

## TODO
- Add `data-` attribute on button to specifiy HTML source to be fetched.
