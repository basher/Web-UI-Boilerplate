import { Meta, Canvas } from '@storybook/blocks';
import * as Modal from './Modal.stories';

<Meta of={Modal} />

# Modal
- Uses the native HTML `<dialog>` element. See [dialog](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog) docs on MDN.
- The button that opens the modal uses the [Invoker Commands API](https://developer.mozilla.org/en-US/docs/Web/API/Invoker_Commands_API#creating_declarative_dialogs).
- No JavaScript is required, except for non-supporting browsers (which use this [polyfill](https://github.com/keithamus/invokers-polyfill/)).
- This Storybook also includes an example of a [`<webui-modal>`](/docs/web-components-or-custom-elements-webui-modal--docs) Web Component.

<Canvas of={Modal.Modal} />

## Accessibility considerations
- There are ongoing discussions about the [initial focus behaviour](https://github.com/whatwg/html/wiki/dialog--initial-focus,-a-proposal) for `<dialog>`.
    - Keyboard `focus` is currently being set, by default, on the first focusable element in the modal (e.g. the close button).
- Closing the modal is handled by the [closedby](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/dialog#closedby) attribute on the `<dialog>`, and focus is set on the button that invoked the modal.
- Add `aria-haspopup="dialog"` to the button that invokes the modal dialog, to announce to assistive technologies that the button opens a dialog.

## Required and optional HTML attributes

Attribute | Behaviour
--- | ---
`command` | Required. On the button that invokes the modal dialog.
`commandfor` | Required. On the button that invokes the modal dialog. This is a reference to the modal's `id`.
`aria-haspopup="dialog"` | Required. On the button that invokes the modal dialog.
`id` | Required. On the dialog. Must match `commandfor` on the invoking button.
`closedby` | Optional. On the dialog. Defines how the [modal can be closed](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/dialog#closedby).
`command` | Optional. On the button that closes the modal dialog.
`commandfor` | Optional. On the button that closes the modal dialog. This must match the modal's `id`.

## Useful articles
- [Is dialog ready to be used?](https://www.scottohara.me/blog/2019/03/05/open-dialog.html)
- [Defending dialog](https://samthor.au/2021/in-defence-of-dialog/) by the official polyfill maintainer.

## Browser compatibility
<baseline-status featureId="dialog"></baseline-status>
<baseline-status featureId="invoker-commands"></baseline-status>

## Modal with overflowing content
<Canvas of={Modal.ModalOverflow} />

## Modal with multiple close buttons
<Canvas of={Modal.ModalMultipleCloseButtons} />
